package TP3;
import java.util.Random; // N'oubliez pas l'import au d√©but du fichier

public class QuatreCoinDuMonde {

	private int taille = 10;
	private Entites[][] map;
	private Entites[] entites;
	
	
	public QuatreCoinDuMonde() {
		entites = new Entites[] {
		        new Obstacles("roche", 10, "r"),
		        new Obstacles("ronces", 10, "R"),
		        new Obstacles("puits", 10, "P"),
		        new Graal("excalibur",100,5,"E"),
		        new Graal("fal lial",80,4,"P"),
		        new Graal("lance lug",40,2,"L"),
		        new Graal("Chaudron_connaissance",50,3,"C")};
		
		this.map = new Entites[taille][taille];
		int n = 10;
		int nbAl1= (int) (Math.random()*n);
		for(int i = 0; i<nbAl1;i++) {
			int nbAl2= (int) (Math.random()*n);
			int nbAl3= (int) (Math.random()*n);
			map[nbAl2][nbAl3]=  entites[(int) (Math.random()*3)];
		}
		int nbAl2= (int) (Math.random()*n);
		Chevalier ch = new Chevalier("Greg",10);
		map[nbAl1][nbAl2]=  ch;
		ch.setPosition(nbAl1, nbAl2);
		
		
	}
	
	
	
	public void seDeplacer(Chevalier c) {
	    int ancienneX = c.getX();
	    int ancienneY = c.getY();

	    int dx = (Math.random() < 0.5) ? -1 : 1;
	    int dy = (Math.random() < 0.5) ? -1 : 1;
	    int nouvelleX = ancienneX + dx;
	    int nouvelleY = ancienneY + dy;
	    if (nouvelleX >= 0 && nouvelleX < taille && nouvelleY >= 0 && nouvelleY < taille) {
	    	map[ancienneX][ancienneY] = null;
	    	map[nouvelleX][nouvelleY] = c;
	    	c.setPosition(nouvelleX, nouvelleY);
	    	}
	    return nouvelleX && nouvelleY;
	}
	
	//afficher
	public String toString() {
		String res = "";
		for (int i = 0; i<taille;i++) {
			for(int y = 0; y < taille; y++) {
				if(i == 0) {
					res += y + " ";
				}
				
				else if(y == 0){
					res += i + " ";
					}
				
				else if(map[i][y] != null) {
					res += map[i][y].recupInitial() + " ";
				}
				
				
				else {
				res += "." + " ";
			}}
			res += "\n";
		
		}
		return res;
	}
 
}
